{% extends "review/base.html" %}
{% block content %}

<div>
    <h1> {{post.title}} </h1>
    <p>{{post.published_date}}</p>
    <p>{{post.text}}</p>
    
    <a href="{% url 'edit' post.id %}">수정하기</a>
    <a href="{% url 'delete' post.id %}">삭제하기</a>
</div>

<br>

<p><small>댓글 {{post.comments.count}}개</small></p>
<div class="form-group">
    <h2><small>댓글</small></h2>
    <form method="POST" action="{% url 'add_comment' post.id %}">
        {% csrf_token %}
        {{form.as_p}}
        <button type = "submit" class="save btn btn-default">작성</button>
    </form>
</div>

{% for comment in post.comments.all %}
<div>
    <div>{{comment.created_date}}</div>
    <strong>{{comment.nickname}}</strong>
    {{comment.text|linebreaks}}
    <a href="{% url 'comment_delete' comment_id=comment.id %}" onclick="return confirm('삭제하시겠습니까?')">댓글 삭제</a>
</div>
{% empty %}
<p> 댓글이 없습니다</p>
{% endfor %}

{% endblock %}